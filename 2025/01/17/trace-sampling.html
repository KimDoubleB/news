<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="https://kimdoubleb.github.io/news/assets/css/syntax.css"><link rel="preconnect" href="https://cdnjs.cloudflare.com"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><title> Trace Sampling / íŠ¸ë ˆì´ìŠ¤ ìƒ˜í”Œë§ - KimDoubleB</title><link rel="shortcut icon" href="https://kimdoubleb.github.io/news/favicon.png"><link rel="alternate" type="application/atom+xml" title="KimDoubleB" href="https://kimdoubleb.github.io/news/atom.xml"><link rel="alternate" type="application/json" title="KimDoubleB" href="https://kimdoubleb.github.io/news/feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="https://kimdoubleb.github.io/news/sitemap.xml" /><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Play:wght@400;700&family=Source+Code+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,300;1,400;1,500;1,600;1,700;1,900&display=swap" rel="stylesheet"><style> *,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0;padding:0}html{font-size:17px}#theme-toggle{opacity:0.65;position:relative;border-radius:5px;height:25px;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;transition:opacity 0.3s ease 0s;border:none;outline:none;background:none;cursor:pointer;padding:0px;appearance:none;transform:scale(0.8)}html,html[data-theme="light"]{--text-font: Play;--source-code-font: Source Code Pro;--very-light-text-color: rgb(222, 222, 222);--light-text-color: rgb(89, 183, 255);--medium-text-color: #555;--main-text-color: #333;--highlight-text-color: #6cb4a0;--dark-text-color: #393e46;--link-color: rgb(50, 87, 209);--mark-color: #4B0082;--code-bg-color: rgb(245, 245, 245);background-color:#fff}html #theme-toggle div,html[data-theme="light"] #theme-toggle div{position:relative;width:24px;height:24px;border-radius:50%;border:none;background-color:var(--theme-ui-colors-transparent, transparent);transform:scale(1);transition:all 0.45s ease 0s;overflow:hidden;box-shadow:inset 8px -8px 0px 0px var(--theme-ui-colors-toggleIcon, #2d3748)}html #theme-toggle div::before,html[data-theme="light"] #theme-toggle div::before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:none;border-radius:50%;transform:translate(0px, 0px);opacity:1;transition:transform 0.45s ease 0s}html #theme-toggle div::after,html[data-theme="light"] #theme-toggle div::after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0px 0px -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon, #2d3748),0 23px 0 var(--theme-ui-colors-toggleIcon, #2d3748),23px 0 0 var(--theme-ui-colors-toggleIcon, #2d3748),-23px 0 0 var(--theme-ui-colors-toggleIcon, #2d3748),15px 15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),-15px 15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),15px -15px 0 var(--theme-ui-colors-toggleIcon, #2d3748),-15px -15px 0 var(--theme-ui-colors-toggleIcon, #2d3748);transform:scale(0);transition:all 0.35s ease 0s}html[data-theme="dark"]{--text-font: Play;--source-code-font: Source Code Pro;--very-light-text-color: #EEE;--light-text-color: #c4bbf0;--medium-text-color: #52057b;--main-text-color: #EAEAEA;--highlight-text-color: #6cb4a0;--dark-text-color: rgb(36, 38, 42);--link-color: rgb(255, 89, 125);--mark-color: #9356c1;--code-bg-color: rgb(36, 38, 42);background-color:#131418}html[data-theme="dark"] #theme-toggle div{position:relative;width:24px;height:24px;border-radius:50%;border:4px solid var(--theme-ui-colors-toggleIcon, #cbd5e0);background-color:var(--theme-ui-colors-toggleIcon, #cbd5e0);transform:scale(0.55);transition:all 0.45s ease 0s;overflow:visible;box-shadow:none}html[data-theme="dark"] #theme-toggle div::before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:2px solid var(--theme-ui-colors-toggleIcon, #cbd5e0);border-radius:50%;transform:translate(14px, -14px);opacity:0;transition:transform 0.45s ease 0s}html[data-theme="dark"] #theme-toggle div::after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0px 0px -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),0 23px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),23px 0 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-23px 0 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),15px 15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-15px 15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),15px -15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0),-15px -15px 0 var(--theme-ui-colors-toggleIcon, #cbd5e0);transform:scale(1);transition:all 0.35s ease 0s}body{font-family:var(--text-font),monospace;text-rendering:optimizeLegibility;line-height:1.75;color:var(--main-text-color)}a{color:var(--link-color);text-decoration:none}.post p{margin:0.5rem 0;word-break:keep-all}.meta{margin:1.4rem 0}.tags-label{font-weight:bold;color:var(--main-text-color);font-size:0.9rem}.tags-list a{display:inline;padding:0;margin:0 0.2rem 0 0;background-color:transparent;font-size:0.85rem;text-decoration:none;color:var(--link-color);transition:color 0.2s ease}.tags-list a:hover{color:var(--link-color);text-decoration:underline;opacity:0.8}a[href*="github.com"],a[href*="linkedin.com"]{color:#00d4aa !important;text-decoration:none}a[href*="github.com"]:hover,a[href*="linkedin.com"]:hover{color:#00ff41 !important;text-decoration:underline}code,pre{background:var(--code-bg-color);margin:0 -27px;border-width:1px}code{font-family:var(--source-code-font),monospace;margin:unset;padding:0.1rem;color:var(--highlight-text-color)}pre code{background-color:unset;color:unset}pre{border-width:3px;padding:0.8rem;white-space:pre-wrap;border-style:none none none solid;border-color:var(--light-text-color)}img{max-width:100%}hr{background:var(--light-text-color);height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:0.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem 0}section{margin-top:5.5rem}blockquote{font-style:italic;border-left:5px solid var(--dark-text-color);padding-left:1rem}h1{color:var(--main-text-color);text-transform:uppercase;font-size:2rem;font-weight:bold;margin-bottom:1.5rem}h2,h3,h4,h5{font-weight:bold;margin-bottom:1.5rem;font-size:2rem}h2{font-size:1.8rem}h3{font-size:1.6rem}h4{font-size:1.4rem}h5{font-size:1.2rem}h6{font-size:1rem}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:0.5rem}.posts>h3{font-weight:500}.post ul{margin:0px;margin:0px 0px 10px 10px;padding-left:15px}.post ol{margin:0px;margin:0px 0px 10px 15px}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:0.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}#News .posts li a,#News.posts li a{color:#8b5cf6}#News .posts li a:hover,#News.posts li a:hover{color:#7c3aed}#Post .posts li a,#Post.posts li a{color:var(--link-color)}#Post .posts li a:hover,#Post.posts li a:hover{color:var(--link-color);opacity:0.8}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}time{color:var(--main-text-color)}.post>h1.title{font-size:x-large;margin-top:0;margin-bottom:0}.post>time{margin-bottom:0;margin-top:3rem}.highlight{margin:0px}main{display:flex;max-width:55rem;margin:-5rem auto 0;padding:2.4rem 2rem;flex-direction:column}.flex-row-between{display:flex;flex-direction:row;justify-content:space-between}.hit{display:flex;justify-content:center;position:initial}.social-footer{padding:1rem;display:flex;justify-content:center;position:initial}.social-footer .social-footer-icons .fa{font-size:1.3rem;color:#a9a9a9}.social-footer .social-footer-icons .fa:hover{color:dimgray;transition:color 0.3s ease-in}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:0.5rem}main{padding:0 2rem}}section{flex-grow:999;display:flex;flex-direction:column}figcaption{font-size:smaller}.bio{margin-bottom:5rem}::selection{background-color:#fffba0;color:#333}mark{background:transparent;color:inherit;text-decoration:underline;text-decoration-color:var(--mark-color);text-decoration-thickness:6.5px;text-decoration-skip-ink:none;text-underline-offset:-3px}.search-article{position:relative}.search-article label[for="search-input"]{position:relative;top:-10px;left:11px}.search-article input[type="search"]{top:-1rem;left:0;border:0;width:100%;height:30px;outline:none;position:absolute;border-radius:5px;padding:10px 10px 10px 35px;color:var(--main-text-color);-webkit-appearance:none;background-color:rgba(128,128,128,0.1);border:1px solid rgba(128,128,128,0.1)}.search-article input[type="search"]::-webkit-input-placeholder{color:#808080}.search-article input[type="search"]::-webkit-search-decoration,.search-article input[type="search"]::-webkit-search-results-decoration{display:none}#search-results{text-align:center}#search-results li{text-align:center}#search-results li::before{content:"â€º";display:inline-block;margin-left:-1.3em;width:1.3em;color:var(--main-text-color)}.post-nav{display:flex;position:relative;margin-top:0;border-top:2px solid var(--light-text-color);line-height:1.4}.post-nav .post-nav-item{border-bottom:0;padding-bottom:10px;width:50%;padding-top:10px;text-decoration:none;box-sizing:border-box}.post-nav .post-nav-item .post-title{color:var(--main-text-color)}.post-nav .post-nav-item:hover .post-title,.post-nav .post-nav-item:focus .post-title{color:var(--link-color);opacity:0.9}.post-nav .post-nav-item .nav-arrow{font-size:17px;color:var(--main-text-color);margin-bottom:3px;font-weight:bold}.post-nav .post-nav-item:nth-child(odd){padding-left:0;padding-right:20px}.post-nav .post-nav-item:nth-child(even){text-align:right;padding-right:0;padding-left:20px}.tags ul{list-style:none;display:grid;grid-template-columns:auto auto auto auto auto auto;grid-template-rows:auto auto auto auto}.tags li{white-space:normal;text-overflow:ellipsis}.timeline{position:center;width:650px;margin:-6em auto;padding:1px;list-style-type:none}@media (max-width: 860px){.timeline{width:100%}}.timeline:before{position:absolute;left:50%;top:0;content:' ';display:block;width:6px;height:100%;margin-left:-3px;background:var(--light-text-color);z-index:5}@media (max-width: 375px){.timeline:before{height:150%}}.timeline li{padding:2em 0}@media (max-width: 860px){.timeline li{padding:2em 0}}.timeline li::after{content:"";display:block;height:150%;clear:both;visibility:hidden}.direction-l{position:relative;width:287px;float:left;text-align:right}@media (max-width: 860px){.direction-l{float:none;width:100%;text-align:center}}.direction-l .flag{color:#333;box-shadow:-1px 1px 1px rgba(0,0,0,0.52)}.direction-l .flag:after{content:"";position:absolute;left:100%;top:50%;height:0;width:0;margin-top:-8px;border:solid transparent;border-left-color:#f8f8f8;border-width:8px;pointer-events:none}@media (max-width: 860px){.direction-l .flag:after{content:"";position:absolute;left:50%;top:-8px;height:0;width:0;margin-left:-8px;border:solid transparent;border-bottom-color:#fff;border-width:8px;pointer-events:none}}.direction-l .time-wrapper{float:left}@media (max-width: 860px){.direction-l .time-wrapper{float:none}}.direction-r{position:relative;width:293px;float:right;text-align:left}@media (max-width: 860px){.direction-r{float:none;width:100%;text-align:center}}.direction-r .flag{color:#333;box-shadow:1px 1px 1px rgba(0,0,0,0.52)}.direction-r .flag:after{content:"";position:absolute;right:100%;top:50%;height:0;width:0;margin-top:-8px;border:solid transparent;border-right-color:#f8f8f8;border-width:8px;pointer-events:none}@media (max-width: 860px){.direction-r .flag:after{content:"";position:absolute;left:50%;top:-8px;height:0;width:0;margin-left:-8px;border:solid transparent;border-bottom-color:#fff;border-width:8px;pointer-events:none}}.direction-r .flag:before{left:-40px}.direction-r .time-wrapper{float:right}@media (max-width: 860px){.direction-r .time-wrapper{float:none}}.flag-wrapper{position:relative;display:inline-block;text-align:center}@media (max-width: 860px){.flag-wrapper{text-align:center}}.flag-wrapper .flag{position:relative;display:inline;background:#f8f8f8;padding:6px 10px;border-radius:5px;font-weight:600;text-align:left}@media (max-width: 860px){.flag-wrapper .flag{background:#fff;z-index:15}}.direction-l .flag:before,.direction-r .flag:before{position:absolute;top:60%;right:-40px;content:' ';display:block;width:12px;height:12px;margin-top:-10px;background:#fff;border-radius:10px;border:4px solid var(--link-color);z-index:10}@media (max-width: 860px){.direction-l .flag:before,.direction-r .flag:before{position:absolute;top:-30px;left:53%;content:' ';display:block;margin-left:-10px}}.time-wrapper{display:inline;line-height:1em;font-size:0.66666em;color:var(--link-color);vertical-align:middle}@media (max-width: 860px){.time-wrapper{display:block;position:relative;margin:4px 0 0 0;z-index:14}}.time-wrapper .time{display:inline-block;padding:4px 6px;background:#f8f8f8}.desc{margin:1em 0.2em -3.5em 0;font-size:0.9em;line-height:1.5em}.desc a{color:var(--link-color);text-decoration:none}.desc a:hover{text-decoration:underline}@media (max-width: 860px){.desc{position:relative;margin:1em 1em 0 1em;padding:1em;background:var(--code-bg-color);box-shadow:0 0 1px rgba(0,0,0,0.2);z-index:15}}</style></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-VX0GEM4CBS"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-VX0GEM4CBS'); </script><body><main><section class="post"><div class="flex-row-between"> <a href="https://kimdoubleb.github.io/news/">Â« back</a> <button title="Change theme" id="theme-toggle" onclick="modeSwitcher()"><div></div></button></div><time datetime="2025-01-17T00:00:00+09:00">Jan 17, 2025 - 5 ' read</time><h1 class="title"> Trace Sampling / íŠ¸ë ˆì´ìŠ¤ ìƒ˜í”Œë§</h1><div class="meta"> <span class="tags-label">ğŸ·ï¸ Tags: </span> <span class="tags-list"> <a href="https://kimdoubleb.github.io/news/tag/trace">trace</a>, <a href="https://kimdoubleb.github.io/news/tag/sampling">sampling</a>, <a href="https://kimdoubleb.github.io/news/tag/observability">observability</a>, <a href="https://kimdoubleb.github.io/news/tag/opentelemetry">opentelemetry</a> </span></div><p>Traceë¥¼ í•™ìŠµí•˜ë‹¤ë³´ë©´ â€œSamplingâ€, â€œìƒ˜í”Œë§â€ì— ëŒ€í•´ í•„ìˆ˜ì ìœ¼ë¡œ ì•Œì•„ì•¼ í•œë‹¤.</p><p>ê·¼ë° ì£¼ë³€ì—ì„œ ê°€ë” í—·ê°ˆë ¤í•˜ì‹œëŠ” ë¶„ë“¤ì´ ìˆì–´ ê¸€ë¡œ ì¢€ ì •ë¦¬í•´ë³´ì í•œë‹¤.</p><p>ë³¸ ê¸€ì˜ ë‚´ìš©ì€ ì•„ë˜ Opentelemetry ê³µì‹ë¬¸ì„œ ê¸€ì„ ì°¸ì¡°í–ˆë‹¤.</p><p><strong><a href="https://opentelemetry.io/docs/concepts/sampling/">OpenTelemetry - Sampling</a></strong></p><p><br /></p><hr /><h2 id="sampling-ìƒ˜í”Œë§"> Sampling? ìƒ˜í”Œë§? <a href="#sampling-ìƒ˜í”Œë§">#</a></h2><p><img alt="Image" src="https://private-user-images.githubusercontent.com/37873745/465695746-cd730481-ed95-418e-990e-31cc2cf2ccd6.jpeg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NTIzODQ4NjksIm5iZiI6MTc1MjM4NDU2OSwicGF0aCI6Ii8zNzg3Mzc0NS80NjU2OTU3NDYtY2Q3MzA0ODEtZWQ5NS00MThlLTk5MGUtMzFjYzJjZjJjY2Q2LmpwZWc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwNzEzJTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDcxM1QwNTI5MjlaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT1mMTBiZGYxMTE3MzY5NjIzNDNmYzY3YzA1ZWY3ZDI4YzYwMGNiNjc3MzM0MTc5ZTg5NTdmZWUxNzE1OGUyYTIxJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.wC7Bo100TteQdOJ2eAs49BS5Fc99Z_VAeBw7w8CGDWQ" /></p><p><strong>Sampling / ìƒ˜í”Œë§</strong></p><ul><li>ëª¨ë“  ê°€ì‹œì„± ì§€í‘œë¥¼ ì €ì¥í•˜ì§€ ì•Šê³ , <mark>ëŒ€í‘œì ì¸ ë°ì´í„°ë§Œ(ëŒ€í‘œì„±ì„ ë„ëŠ” ë°ì´í„°ë§Œ) ì €ì¥í•˜ëŠ” ê²ƒ</mark></li><li>â€˜ëŒ€í‘œì„±â€™ì´ë¼ëŠ” ê±´ ì‘ì€ ê·¸ë£¹ì´ ë” í° ê·¸ë£¹ì„ ì •í™•í•˜ê²Œ ëŒ€í‘œí•  ìˆ˜ ìˆë‹¤ëŠ” ì›ì¹™</li></ul><p><br /></p><p>â€œSampling ë¬ì–´?â€ ê°™ì€ ê°œë…ì„ í—·ê°ˆë¦¬ëŠ” ì‚¬ëŒë“¤ì´ ìˆë‹¤. í—·ê°ˆë¦¬ì§€ ë§ì.</p><ul><li><strong>Sampled (ìƒ˜í”Œë§ ë¬ë‹¤)</strong>: Trace/Spanì´ ì „ì†¡ë¨. <mark>ì „ì²´ ë°ì´í„°ì˜ ëŒ€í‘œ</mark>ê°€ ëœ ê²ƒ</li><li><strong>Not Sampled (ìƒ˜í”Œë§ ë˜ì§€ ì•Šì•˜ë‹¤)</strong>: Trace/Spanì´ ì „ì†¡/ì²˜ë¦¬ë˜ì§€ ì•Šì€ ê²ƒ</li></ul><p><br /></p><hr /><h2 id="ìƒ˜í”Œë§ì„-ì™œ-ì‚¬ìš©í• ê¹Œ"> ìƒ˜í”Œë§ì„ ì™œ ì‚¬ìš©í• ê¹Œ? <a href="#ìƒ˜í”Œë§ì„-ì™œ-ì‚¬ìš©í• ê¹Œ">#</a></h2><p><strong>â€œë¹„ìš©â€ê³¼ â€œì ‘ê·¼ì„±/ìš©ì´ì„±â€ ì¸¡ë©´ì´ ìˆë‹¤.</strong></p><p>ê·¼ë° ì ‘ê·¼ì„±/ìš©ì´ì„±ë„ ê°œë°œìì˜ â€œë¹„ìš©â€ê³¼ ê´€ë ¨ì´ ìˆìœ¼ë¯€ë¡œ ê·¸ëƒ¥ <strong>â€œë¹„ìš©â€ ë•Œë¬¸ì— ì‚¬ìš©í•œë‹¤</strong>ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.</p><ul><li>ìƒ˜í”Œë§ì€ <strong>â€œë¹„ìš©â€ì„ ì¤„ì´ëŠ” ê°€ì¥ íš¨ê³¼ì ì¸ ë°©ë²• ì¤‘ í•˜ë‚˜</strong>ì´ë‹¤.</li><li>ëŒ€ìš©ëŸ‰ ì‹œìŠ¤í…œì—ì„œ ì˜ ë§Œë“¤ì–´ì§„ íŠ¸ë ˆì´ì‹± ìƒ˜í”Œë§ êµ¬ì¡°ì—ì„  <mark>1% ê·¸ ì´í•˜ì˜ ìƒ˜í”Œë§ ë¹„ìœ¨ë¡œë„ ë‚˜ë¨¸ì§€ 99% ë°ì´í„°ë¥¼ ë§¤ìš° ì •í™•í•˜ê²Œ ëŒ€í‘œ</mark>í•œë‹¤.</li></ul><p><br /></p><p>ìƒ˜í”Œë§ì´ ë¹„ìš©ì„ ì¤„ì´ê¸° ìœ„í•œ ê¸°ëŠ¥ì´ì§€ë§Œ, ì‚¬ì‹¤ <mark>ìƒˆë¡œìš´ ë¹„ìš©</mark>ì„ ë§Œë“¤ê¸°ë„ í•œë‹¤.</p><ol><li><strong>Tail Sampling</strong> ê°™ì´ íš¨ê³¼ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ìƒ˜í”Œë§í•˜ëŠ”ë° ë“œëŠ” ì§ì ‘ì ì¸ ì»´í“¨íŒ… ë¹„ìš© (ê³„ì‚° ë¹„ìš©)</li><li>ë” ë§ì€ ì• í”Œë¦¬ì¼€ì´ì…˜, ì‹œìŠ¤í…œ, ë°ì´í„°ê°€ ê´€ë ¨ë  ë•Œ, íš¨ê³¼ì ì¸ ìƒ˜í”Œë§ ë°©ì‹ì„ ìœ ì§€í•˜ëŠ”ë° ë“œëŠ” <strong>ì—”ì§€ë‹ˆì–´ë§ ë¹„ìš©</strong></li><li>ë¹„íš¨ê³¼ì ì¸ ìƒ˜í”Œë§ ê¸°ìˆ ë¡œ ì¸í•´ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ë†“ì¹˜ëŠ” ê°„ì ‘ì ì¸ <strong>ê¸°íšŒë¹„ìš©</strong></li></ol><p>ìƒ˜í”Œë§ ìì²´ëŠ” ë°ì´í„°ë¥¼ ì¤„ì—¬(ëŒ€í‘œì„± ìˆëŠ” ë°ì´í„°ë§Œ ì €ì¥í•´) ë¹„ìš©ì„ ì¤„ì´ëŠ”ë° íš¨ê³¼ì ì´ë‚˜, <mark>ì œëŒ€ë¡œ ìˆ˜í–‰ë˜ì§€ ì•Šìœ¼ë©´ ì˜¤íˆë ¤ ì˜ˆìƒì¹˜ ëª»í•œ ë¹„ìš©</mark>ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</p><p><br /></p><hr /><h2 id="ì–¸ì œ-ìƒ˜í”Œë§ì„-ì‚¬ìš©í•´ì•¼-í• ê¹Œ"> ì–¸ì œ ìƒ˜í”Œë§ì„ ì‚¬ìš©í•´ì•¼ í• ê¹Œ? <a href="#ì–¸ì œ-ìƒ˜í”Œë§ì„-ì‚¬ìš©í•´ì•¼-í• ê¹Œ">#</a></h2><h3 id="ìƒ˜í”Œë§ì´-í•„ìš”í•œ-ê²½ìš°"> ìƒ˜í”Œë§ì´ í•„ìš”í•œ ê²½ìš° <a href="#ìƒ˜í”Œë§ì´-í•„ìš”í•œ-ê²½ìš°">#</a></h3><ul><li>ì´ˆë‹¹ 1000ê°œ ì´ìƒì˜ Traceë¥¼ ìƒì„±í•˜ê³  ìˆëŠ” ê²½ìš°</li><li>ëŒ€ë¶€ë¶„ì˜ Trace ë°ì´í„°ê°€ ë°ì´í„° ë³€ë™ì´ ì ì€ ì •ìƒ íŠ¸ë˜í”½ì„ í‘œí˜„í•˜ëŠ” ê²½ìš°</li><li>ì˜¤ë¥˜, ë†’ì€ ì§€ì—°ì‹œê°„ ê°™ì´ ë¬¸ì œë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì¼ë°˜ì ì¸ ê¸°ì¤€ì´ ìˆëŠ” ê²½ìš°</li><li>ì˜¤ë¥˜, ë†’ì€ ì§€ì—°ì‹œê°„ ì™¸ì— ì´ëŸ¬í•œ ì •ë³´ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ë„ë©”ì¸ ë³„ ê¸°ì¤€ì´ ìˆëŠ” ê²½ìš°</li><li>ë°ì´í„° ìƒ˜í”Œë§ í• ì§€/ë§ì§€ë¥¼ ê²°ì •í•  ìˆ˜ ìˆëŠ” ì¼ë°˜ì ì¸ ê·œì¹™ì´ ìˆëŠ” ê²½ìš°</li><li>ì„œë¹„ìŠ¤ë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆì–´ ê³ ìš©ëŸ‰/ì €ìš©ëŸ‰ ì„œë¹„ìŠ¤ë¥¼ ë‹¤ë¥´ê²Œ ìƒ˜í”Œë§ í•  ìˆ˜ ìˆëŠ” ê²½ìš°</li><li>ìƒ˜í”Œë§ ë˜ì§€ ì•Šì€ ë°ì´í„°ë¥¼ ì €ë¹„ìš© ì €ì¥ ì‹œìŠ¤í…œìœ¼ë¡œ ë¼ìš°íŒ… í•  ìˆ˜ ìˆëŠ” ê²½ìš°</li><li>ì „ì²´ ì˜ˆì‚°ì´ ì œí•œì ì¸ ê²½ìš°</li><li>ê´€ì°°ê°€ëŠ¥ì„±ì— ëŒ€í•´ ì œí•œëœ ì˜ˆì‚°ì´ ìˆì§€ë§Œ íš¨ê³¼ì ì¸ ìƒ˜í”Œë§ì— ì‹œê°„ì„ íˆ¬ìí•  ìˆ˜ ìˆëŠ” ê²½ìš°</li></ul><p><br /></p><h3 id="ìƒ˜í”Œë§ì´-ì í•©í•˜ì§€-ì•Šì€-ê²½ìš°"> ìƒ˜í”Œë§ì´ ì í•©í•˜ì§€ ì•Šì€ ê²½ìš° <a href="#ìƒ˜í”Œë§ì´-ì í•©í•˜ì§€-ì•Šì€-ê²½ìš°">#</a></h3><ul><li>ë§¤ìš° ì ì€ Trace ë°ì´í„°ë¥¼ ìƒì„±í•˜ê³  ìˆëŠ” ê²½ìš° (ì´ˆë‹¹ ìˆ˜ì‹­ê°œ ì •ë„)</li><li>ê´€ì°°ê°€ëŠ¥ì„±ì„ ë°ì´í„° ì§‘ê³„ë¡œë§Œ ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” ê²½ìš°</li><li>ë°ì´í„° ì‚­ì œë¥¼ ê¸ˆì§€í•˜ëŠ” ê·œì œê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°</li></ul><p><br /></p><hr /><h2 id="ìƒ˜í”Œë§-ë°©ë²•"> ìƒ˜í”Œë§ ë°©ë²• <a href="#ìƒ˜í”Œë§-ë°©ë²•">#</a></h2><p>ìƒ˜í”Œë§ì€ í¬ê²Œ 2ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ë‚˜ë‰œë‹¤.</p><ul><li><strong>Head Sampling</strong></li><li><strong>Tail Sampling</strong></li></ul><p><br /></p><h3 id="head-sampling"> Head Sampling <a href="#head-sampling">#</a></h3><p><strong>ê°€ëŠ¥í•œ ë¹¨ë¦¬ ìƒ˜í”Œë§ ì—¬ë¶€ë¥¼ ê²°ì •í•˜ëŠ” ê¸°ìˆ </strong></p><p>Trace ì „ì²´ë¥¼ ê²€ì‚¬í•˜ì§€ ì•Šê³ , Trace/Spanì„ ìƒ˜í”Œë§ ì—¬ë¶€ ê²°ì • ê²°ì •í•œë‹¤.</p><p>ê°€ì¥ ì¼ë°˜ì ì¸ Head Samplingì€ <strong>Consistent Probability Sampling</strong>ì´ ìˆìœ¼ë©°, <strong>Deterministic Sampling(ê²°ì •ë¡ ì  ìƒ˜í”Œë§)</strong>ì´ë¼ê³ ë„ í•œë‹¤.</p><p>ê°„ë‹¨íˆ ì„¤ëª…í•˜ë©´ <strong>Trace IDì™€ ìƒ˜í”Œë§ í•˜ëŠ” ë¹„ìœ¨ ê¸°ë°˜ìœ¼ë¡œ ìƒ˜í”Œë§ ì—¬ë¶€ë¥¼ ê²°ì •í•˜ëŠ” ë°©ì‹</strong>ì´ë‹¤. ì´ë¥¼ í†µí•´ ì „ì²´ Traceê°€ ëˆ„ë½ëœ Span ì—†ì´ 5% ê°™ì€ ì¼ê´€ëœ ë¹„ìœ¨ë¡œ ìƒ˜í”Œë§ ëœë‹¤.</p><p><br /></p><h4 id="ì¥ì "> ì¥ì  <a href="#ì¥ì ">#</a></h4><ul><li>ì´í•´ ë° êµ¬ì„±ì´ ì‰½ë‹¤</li><li>íš¨ìœ¨ì ìœ¼ë¡œ ë™ì‘í•œë‹¤. Trace ì „ì²´ë¥¼ ë³¼ í•„ìš” ì—†ìœ¼ë‹ˆ ê³„ì‚°ì´ ë³µì¡í•˜ì§€ ì•Šë‹¤</li><li>Trace ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸ ì–´ë””ì„œë‚˜ ìˆ˜í–‰ì´ ê°€ëŠ¥í•˜ë‹¤</li></ul><p><br /></p><h4 id="ë‹¨ì "> ë‹¨ì  <a href="#ë‹¨ì ">#</a></h4><p><strong>ì „ì²´ Trace ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒ˜í”Œë§ ê²°ì •ì„ ë‚´ë¦¬ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ëŠ” ë‹¨ì ì´ ìˆë‹¤.</strong></p><p>ì˜ˆë¥¼ ë“¤ì–´, ì˜¤ë¥˜ê°€ ìˆëŠ” ëª¨ë“  TraceëŠ” ìƒ˜í”Œë§ ë˜ë„ë¡ ë³´ì¥í•˜ê³  ì‹¶ì–´ë„ í•  ìˆ˜ ì—†ë‹¤. ì´ëŸ¬í•œ ê²½ìš°ì—ëŠ” <strong>Tail Samplingì´ í•„ìš”</strong>í•˜ë‹¤.</p><p><br /></p><p><br /></p><h3 id="tail-sampling"> Tail Sampling <a href="#tail-sampling">#</a></h3><p><strong>Trace ë‚´ì˜ ëª¨ë“  ë˜ëŠ” ëŒ€ë¶€ë¶„ì˜ Spanì„ ê³ ë ¤í•´ ìƒ˜í”Œë§ ì—¬ë¶€ë¥¼ ê²°ì •í•˜ëŠ” ë°©ì‹</strong></p><p>Head Samplingì—ì„œëŠ” ë¶ˆê°€ëŠ¥í•œ Trace/Spanì˜ ì •ë³´ë¥¼ ì´ìš©í•˜ì—¬ íŠ¹ì • ê¸°ì¤€ì— ë”°ë¼ ìƒ˜í”Œë§ ì—¬ë¶€ë¥¼ ê²°ì •í•  ìˆ˜ ìˆë‹¤.</p><p><img alt="Image" src="https://github.com/user-attachments/assets/77737785-d158-49a2-aaea-371fcb90d3c9" /></p><p><br /></p><h4 id="ì˜ˆì‹œ"> ì˜ˆì‹œ <a href="#ì˜ˆì‹œ">#</a></h4><ul><li>ì˜¤ë¥˜ê°€ í¬í•¨ëœ Traceë¥¼ 100% ìƒ˜í”Œë§ í•˜ê¸°</li><li>ì „ì²´ ì§€ì—°ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì–´ëŠ ì´ìƒì´ ë˜ëŠ” Traceë¥¼ ìƒ˜í”Œë§ í•˜ê¸°</li><li>Trace ë‚´ í•˜ë‚˜ ì´ìƒì˜ Spanì— ìˆëŠ” íŠ¹ì • ì†ì„± ì¡´ì¬ í˜¹ì€ ê°’ ê¸°ì¤€ìœ¼ë¡œ Trace ìƒ˜í”Œë§ í•˜ê¸° (ë°°í¬ ë²„ì „ì— ë§ê²Œ ìƒ˜í”Œë§ ë“±)</li><li>ì €ìš©ëŸ‰ ì„œë¹„ìŠ¤ì—ì„œ ì˜¤ëŠ” Trace, ê³ ìš©ëŸ‰ ì„œë¹„ìŠ¤ì—ì„œ ì˜¤ëŠ” Traceë¥¼ êµ¬ë¶„í•´ì„œ ìƒ˜í”Œë§ ë¹„ìœ¨ì„ ë‹¤ë¥´ê²Œ ìƒ˜í”Œë§ í•˜ê¸°</li></ul><p>ì˜ˆì‹œì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ <strong>Head Samplingë³´ë‹¤ í›¨ì”¬ ë” ì •êµí•˜ê²Œ ìƒ˜í”Œë§ì´ ê°€ëŠ¥</strong>í•˜ë‹¤. ìƒ˜í”Œë§ í•„ìš”í•œ ëŒ€ê·œëª¨ ì‹œìŠ¤í…œì˜ ê²½ìš°, ë°ì´í„° ë³¼ë¥¨/ê· í˜•ì„ ë§ì¶”ê¸° ìœ„í•´ <strong>Tail Samplingì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê±°ì˜ í•­ìƒ í•„ìš”</strong>í•˜ë‹¤.</p><p><br /></p><h4 id="ë‹¨ì -1"> ë‹¨ì  <a href="#ë‹¨ì -1">#</a></h4><p>ì¥ì ë§Œ ìˆì§€ëŠ” ì•Šë‹¤.</p><ul><li><strong>êµ¬í˜„ì˜ ì–´ë ¤ì›€</strong>: ì‹œìŠ¤í…œì˜ ë³€í™”ì— ë”°ë¼ ìƒ˜í”Œë§ ì „ëµë„ ê³„ì† ë³€í™”í•´ì•¼ í•¨ (ì„¤ì •í•˜ê³  ìŠì–´ë²„ë ¤ì„œëŠ” ì•ˆë¨). ëŒ€ê·œëª¨/ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ì´ëŸ¬í•œ ì „ëµì„ êµ¬í˜„í•˜ëŠ” ê·œì¹™ë„ í¬ê³  ì •êµí•  ìˆ˜ ìˆìŒ</li><li><strong>ìš´ì˜ì˜ ì–´ë ¤ì›€</strong>: Tail Samplingì„ êµ¬í˜„í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ëŠ” ë§ì€ ì–‘ì˜ ë°ì´í„°ë¥¼ ë°›ì•„ë“¤ì´ê³  ì €ì¥í•  ìˆ˜ ìˆëŠ” stateful systemì´ì—¬ì•¼ í•¨. íŠ¸ë˜í”½ íŒ¨í„´ì— ë”°ë¼ ë§ì€ ì–‘ì˜ ì»´í“¨íŒ… ë…¸ë“œê°€ í•„ìš”í•  ìˆ˜ ìˆìŒ. ê³ ë¡œ, Tail Sampling ì»´í¬ë„ŒíŠ¸ë¥¼ ëª¨ë‹ˆí„°ë§í•´ì„œ ìƒ˜í”Œë§ ë¡œì§ì— í•„ìš”í•œ ë¦¬ì†ŒìŠ¤ê°€ ì—¬ìœ ë¡œìš´ì§€ ëª¨ë‹ˆí„°ë§í•´ì•¼ í•¨</li><li>ê´€ì°°ê°€ëŠ¥ì„±ì„ ìœ„í•´ ìœ ë£Œ ë²¤ë”ë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš°, ë²¤ë”ì—ì„œ ì œê³µí•˜ëŠ” Tail Samplingìœ¼ë¡œ ì œí•œë  ìˆ˜ ìˆìŒ</li></ul><p><br /></p><h3 id="head--tail-sampling-ì¡°í•©"> Head + Tail Sampling ì¡°í•© <a href="#head--tail-sampling-ì¡°í•©">#</a></h3><p><strong>Tail Samplingê³¼ Head Samplingì„ ë”°ë¡œ ì‚¬ìš©í•´ì•¼ë§Œ í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.</strong></p><p>Telemetry Pipelineì´ ê³¼ë¶€í•˜ ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ í•¨ê»˜ ì‚¬ìš©ë  ìˆ˜ë„ ìˆë‹¤. ë§¤ìš° ë§ì€ ì–‘ì˜ Trace ë°ì´í„°ë¥¼ ìƒì„±í•˜ëŠ” ì„œë¹„ìŠ¤ì˜ ê²½ìš°, ë¨¼ì € <strong>Head Samplingì„ í†µí•´ Traceë¥¼ ì‘ì€ ë¹„ìœ¨ë¡œ ì¤„ì´ê³  Telemetry Pipelineì—ì„œ Tail Samplingì„ ì´ìš©í•˜ì—¬ ë” ì •êµí•œ ë¡œì§ì„ í†µí•´ Sampling ì—¬ë¶€ë¥¼ ê²°ì •</strong>í•  ìˆ˜ ìˆë‹¤.</p><p><br /></p><hr /><h2 id="opentelemetry-collector-ì§€ì›"> OpenTelemetry Collector ì§€ì› <a href="#opentelemetry-collector-ì§€ì›">#</a></h2><p>ì´ì— ëŒ€í•´ì„œ <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib">OpenTelemetry Collector</a>ì—ì„œë„ ì§€ì›í•œë‹¤.</p><ul><li><strong>Filter processor</strong>: ì „ë‹¬ëœ ì •ë³´ë¥¼ ì´ìš©í•´ í•„í„°ë§ ì—¬ë¶€ ê²°ì •í•  ìˆ˜ ìˆìŒ (ë‹¨ìˆœ ê²°ì •)</li><li><strong>Probabilistic Sampling processor</strong>: í¼ì„¼íŠ¸ ì •í•´ë†“ê³  ìƒ˜í”Œë§ â†’ í—¤ë“œ ìƒ˜í”Œë§</li><li><strong>Tail Sampling processor</strong>: í…Œì¼ ìƒ˜í”Œë§. ë³µì¡í•œ ì¡°ê±´ë„ ê°€ëŠ¥í•˜ê³ , probabilistic samplingë„ ê°€ëŠ¥í•¨</li></ul><p><br /></p><hr /><h2 id="ë§ˆë¬´ë¦¬"> ë§ˆë¬´ë¦¬ <a href="#ë§ˆë¬´ë¦¬">#</a></h2><p>íŠ¸ë ˆì´ìŠ¤ ìƒ˜í”Œë§ì€ ê´€ì°°ê°€ëŠ¥ì„± ì‹œìŠ¤í…œì—ì„œ ë¹„ìš©ì„ íš¨ê³¼ì ìœ¼ë¡œ ê´€ë¦¬í•˜ë©´ì„œë„ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ë†“ì¹˜ì§€ ì•ŠëŠ” í•µì‹¬ ê¸°ìˆ ì´ë‹¤.</p><p><strong>Head Sampling</strong>ì€ êµ¬í˜„ì´ ì‰½ê³  íš¨ìœ¨ì ì´ì§€ë§Œ ì œí•œì ì´ê³ , <strong>Tail Sampling</strong>ì€ ë” ì •êµí•˜ì§€ë§Œ ë³µì¡í•˜ê³  ë¹„ìš©ì´ ë§ì´ ë“ ë‹¤. ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ë‘ ë°©ì‹ì„ ì ì ˆíˆ ì¡°í•©í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.</p><p>ì¤‘ìš”í•œ ê²ƒì€ <mark>ìƒ˜í”Œë§ ì „ëµì„ í•œ ë²ˆ ì„¤ì •í•˜ê³  ëë‚´ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³  ìµœì í™”í•´ì•¼ í•œë‹¤ëŠ” ì </mark>ì´ë‹¤. ì‹œìŠ¤í…œì´ ë³€í™”í•˜ë©´ ìƒ˜í”Œë§ ì „ëµë„ í•¨ê»˜ ë³€í™”í•´ì•¼ íš¨ê³¼ì ì¸ ê´€ì°°ê°€ëŠ¥ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.</p></section><section><nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/news/2023/05/14/4-news"><div class="nav-arrow">Previous</div><span class="post-title">Monolith vs MSA ì•„í‚¤í…ì²˜ / ì˜¤í”ˆì†ŒìŠ¤ ìƒíƒœê³„ / Transactional Outbox íŒ¨í„´</span> </a> <a class="post-nav-item post-nav-next" href="/news/2025/06/26/career"><div class="nav-arrow">Next</div><span class="post-title">'ë‚˜ì˜ ì¼ì„ ì»¤ë¦¬ì–´ë¡œ ì—°ê²°í•˜ëŠ” ë²•'ì„ ë“£ê³ </span> </a></nav></section><div id="disqus_thread" class="article-comments"></div><script> (function() { var d = document, s = d.createElement('script'); s.src = '//kimdoubleb-news.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></main><script> function setTheme(theme) { if (theme === "dark") { document.documentElement.setAttribute('data-theme', 'dark'); window.localStorage.setItem('theme', 'dark'); document.getElementById("theme-toggle").classList.add('sun'); document.getElementById("theme-toggle").classList.remove('moon'); } else { document.documentElement.setAttribute('data-theme', 'light'); window.localStorage.setItem('theme', 'light'); document.getElementById("theme-toggle").classList.add('moon'); document.getElementById("theme-toggle").classList.remove('sun'); } } let theme = localStorage.getItem('theme'); theme = theme || (window.matchMedia ? window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light' : 'light'); setTheme(theme); function modeSwitcher() { let currentMode = document.documentElement.getAttribute('data-theme'); if (currentMode === "dark") { setTheme('light'); } else { setTheme('dark'); } } </script></body><footer class="social-footer"></footer></html>
